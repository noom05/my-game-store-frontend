<div class="form-container container py-5">
  <!-- Spinner -->
  <div *ngIf="isLoading" class="text-center">
    <div class="spinner-border text-warning" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2">กำลังโหลดข้อมูล...</p>
  </div>

  <!-- Form -->
  <form *ngIf="!isLoading" [formGroup]="addGameForm" (ngSubmit)="onSubmit()">
    <div class="form-section row g-5">
      
      <!-- Image Upload -->
      <div class="col-lg-5">
        <input #fileInput id="fileInput" type="file" (change)="onFileSelect($event)" accept="image/*" class="d-none" />
        <label for="fileInput" class="image-upload-box">
          <div id="imagePreview">
            <img *ngIf="imagePreview" [src]="imagePreview" alt="Game Image Preview" />
            <div *ngIf="!imagePreview" class="placeholder-content">
              <i class="bi bi-image"></i>
              <span>คลิกเพื่ออัปโหลด</span>
            </div>
          </div>
        </label>
      </div>

      <!-- Form Fields -->
      <div class="col-lg-7 d-flex flex-column">
        <h2 class="form-title">เพิ่มเกมใหม่</h2>

        <div class="mb-3">
          <label for="game_name" class="form-label">ชื่อเกม</label>
          <input type="text" id="game_name" class="form-control" formControlName="game_name" placeholder="เช่น EA SPORTS FC™ 26" />
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">รายละเอียดเกม</label>
          <textarea id="description" class="form-control" formControlName="description" rows="4" placeholder="บอกเล่าเรื่องราวเกี่ยวกับเกมของคุณ..."></textarea>
        </div>
        
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="price" class="form-label">ราคา</label>
                <input type="number" id="price" class="form-control" formControlName="price" placeholder="เช่น 1999" />
            </div>
            <div class="col-md-6 mb-3">
                <label for="release_date" class="form-label">วันวางจำหน่าย</label>
                <input type="date" id="release_date" class="form-control" formControlName="release_date" />
            </div>
        </div>

        <div class="mb-4">
          <label class="form-label">ประเภทเกม</label>
          <!-- ใช้ form-check ของ Bootstrap -->
          <div class="d-flex flex-wrap gap-3">
            <div *ngFor="let type of allTypes" class="form-check form-check-inline">
              <input 
                class="form-check-input" 
                type="checkbox" 
                [value]="type.id" 
                (change)="onTypeChange($event)"
                [id]="'type-'+type.id">
              <label class="form-check-label" [for]="'type-'+type.id">
                {{ type.type_name }}
              </label>
            </div>
          </div>
        </div>

        <div class="d-flex justify-content-end gap-3 mt-auto">
          <button type="submit" class="btn btn-confirm" [disabled]="addGameForm.invalid || !selectedFile">
            ยืนยัน
          </button>
          <a routerLink="/dashboard" class="btn btn-cancel">ยกเลิก</a>
        </div>
      </div>
    </div>
  </form>
</div>

